<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>PregUNLaM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body class="w3-light-grey" style="display: flex; flex-direction: column; min-height: 100vh; margin: 0;">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<header class="w3-container w3-padding w3-card"
        style="background-image: url('{{BASE_URL}}imagenes/BannerFondo.png');
               background-size: cover;
               background-position: center;
               height: 100px; display: flex; align-items: center; justify-content: space-between;">

    <!-- IZQUIERDA: Bienvenida -->
    <div class="w3-text-white w3-large" style="margin-left: 10px;">
        {{#usuarioLogueado}}
            Bienvenido {{usuarioLogueado.nombreUsuario}} ({{usuarioLogueado.tipoUsuario}})
        {{/usuarioLogueado}}
        {{^usuarioLogueado}}
            Bienvenido Invitado
        {{/usuarioLogueado}}
    </div>

    <!-- CENTRO: Logo -->
    <div class="w3-center" style="flex-grow: 1;">
        <a href="{{BASE_URL}}"><img src="{{BASE_URL}}imagenes/IsologotipoApaisado.png"
             alt="Logo PregUNLaM"
             style="max-height: 180px; width: auto;"></a>
    </div>

    <!-- DERECHA: Controles -->
    <div class="w3-right-align" style="margin-right: 10px;">
        <!-- BotÃ³n de mÃºsica -->
        <button class="w3-button w3-green w3-round"
                style="margin-right: 5px;"
                onclick="toggleMusic()">ðŸŽµ MÃºsica</button>

        <!-- Si NO estÃ¡ logueado -->
        {{^usuarioLogueado}}
            <a class="w3-button w3-blue w3-round" href="{{BASE_URL}}usuario/login">Login</a>
        {{/usuarioLogueado}}

        <!-- Si estÃ¡ logueado -->
        {{#usuarioLogueado}}
            <div class="w3-dropdown-hover">
                <button class="w3-button w3-blue w3-round">Mi Cuenta â®Ÿ</button>
                <div class="w3-dropdown-content w3-bar-block w3-card-4 w3-animate-opacity"
                     style="right:0; background-color: #f0f0f0;">
                    <a href="{{BASE_URL}}usuario/verPerfil/idUsuario={{usuarioLogueado.idUsuario}}" class="w3-bar-item w3-button"><i class="fa-solid fa-user"></i> Ver Perfil</a>
                    <a href="{{BASE_URL}}usuario/contactos" class="w3-bar-item w3-button"><i class="fa-solid fa-user"></i> Contactos</a>
                    <a href="{{BASE_URL}}usuario/logout" class="w3-bar-item w3-button w3-text-red"><i class="fa-solid fa-right-from-bracket" style="color: #d11010;"></i> Cerrar sesiÃ³n</a>
                </div>
            </div>
        {{/usuarioLogueado}}
    </div>
</header>

<script>
    function toggleMusic() {
        alert("Funcionalidad de mÃºsica aÃºn no implementada ðŸŽ¶");
    }
</script>