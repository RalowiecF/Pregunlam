<div class="w3-card w3-white w3-padding w3-content"
      style="max-width:900px; margin-top: 3rem">

    <!-- Cargar estilos desde W3.CSS y Leaflet directamente -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />



    <style>
        #map { height: 300px; margin-top: 8px; }
    </style>

    <div class="w3-row-padding" style="min-width: 60rem">
        <!-- Columna 1 -->
        <div class="w3-half">
            <img src="/PregUNLaM/imagenes/usuario.png" alt="Foto de Perfil" style="width:150px; height:150px; object-fit:cover; border-radius:50%; display:block; margin-bottom: 1rem;border: solid">
            <h1>{{usuario.nombreUsuario}}</h1>
            <h2><i class="fa-solid fa-globe"></i>{{usuario.pais}}</h2>
            <div id="map" class="w3-border" style="height: 250px; "></div>
        </div>

        <!-- Columna 2 -->
        <div class="w3-half" style="text-align: center">
            <h2>Listado de Partidas:</h2>
        </div>
    </div>


    <!-- SCRIPTS: validación y mapa -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Validar contraseña
        function validarFormulario() {
            const pass = document.getElementById("contraseña").value;
            const confirm = document.getElementById("confirmarContraseña").value;
            if (pass !== confirm) {
                alert("Las contraseñas no coinciden.");
                return false;
            }
            return true;
        }

        // Iniciar mapa
        const lat = {{#usuarioLogueado}}{{usuarioLogueado.latitud}}{{/usuarioLogueado}}{{^usuarioLogueado}}-34.6037{{/usuarioLogueado}};
        const lng = {{#usuarioLogueado}}{{usuarioLogueado.longitud}}{{/usuarioLogueado}}{{^usuarioLogueado}}-58.3816{{/usuarioLogueado}};
        const map = L.map('map').setView([lat,lng], 9); // Buenos Aires

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        let marker;
        map.on('click', function(e) {
            const lat = e.latlng.lat.toFixed(6);
            const lng = e.latlng.lng.toFixed(6);
            document.getElementById('latitud').value = lat;
            document.getElementById('longitud').value = lng;

            if (marker) {
                marker.setLatLng(e.latlng);
            } else {
                marker = L.marker(e.latlng).addTo(map);
            }
        });
    </script>
</div>